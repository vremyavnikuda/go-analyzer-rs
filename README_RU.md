# Go Analyzer RS

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä Go –∫–æ–¥–∞ –Ω–∞ Rust —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π VS Code, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö data race.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–Ω–∞–ª–∏–∑ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**: –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –∫–æ–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–µ—Å—å –µ—ë –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**: –ê–Ω–∞–ª–∏–∑ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –∫—É—Ä—Å–æ—Ä–∞
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ data race**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö data race –≤ –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö
- **–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è**:
  - üü¢ **–ó–µ–ª–µ–Ω—ã–π**: –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
  - üü° **–ñ–µ–ª—Ç—ã–π**: –û–±—ã—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
  - üîµ **–°–∏–Ω–∏–π**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è
  - üî¥ **–ö—Ä–∞—Å–Ω—ã–π**: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π data race –≤ –≥–æ—Ä—É—Ç–∏–Ω–µ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π Makefile –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π —Å–±–æ—Ä–∫–∏ –∏ —É–ø–∞–∫–æ–≤–∫–∏:

```bash
# –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –∏ —É–ø–∞–∫–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
make all

# –ò–ª–∏ –ø–æ—à–∞–≥–æ–≤–æ:
make clean    # –û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–±–æ—Ä–∫–∏
make build    # –°–æ–±—Ä–∞—Ç—å Rust —Å–µ—Ä–≤–µ—Ä
make copy     # –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –≤ –ø–∞–ø–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
make npm      # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make compile  # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å TypeScript —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
make package  # –£–ø–∞–∫–æ–≤–∞—Ç—å VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
```

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

#### –°–±–æ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cargo build --release
```

#### –°–±–æ—Ä–∫–∞ VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

```bash
cd vscode
npm install
npm run compile
```

#### –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ Rust —Å–µ—Ä–≤–µ—Ä–∞ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –±–∏–Ω–∞—Ä–Ω–∏–∫ –≤ –ø–∞–ø–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É server –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
mkdir -p vscode/server

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫ (Windows)
copy target\release\go-analyzer-rs.exe vscode\server\

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫ (Linux/macOS)
cp target/release/go-analyzer-rs vscode/server/
```

### –°–±–æ—Ä–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```bash
# –°–æ–±—Ä–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏
cargo build

# –°–æ–±—Ä–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
cd vscode && npm run watch
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
1. –û—Ç–∫—Ä–æ–π—Ç–µ Go —Ñ–∞–π–ª –≤ VS Code
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
3. –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º–µ—â–∞–π—Ç–µ –∫—É—Ä—Å–æ—Ä –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º - –∞–Ω–∞–ª–∏–∑ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –£–≤–∏–¥–∏—Ç–µ —Ü–≤–µ—Ç–æ–≤—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é –≤—Å–µ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

### –†—É—á–Ω–æ–π –∞–Ω–∞–ª–∏–∑
1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –∫–æ–¥–µ
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `Go Analyzer: Show Lifecycle` (Ctrl+Shift+P ‚Üí "Go Analyzer: Show Lifecycle")

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö VS Code –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

- `goAnalyzer.enableAutoAnalysis` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true)
- `goAnalyzer.autoAnalysisDelay` - –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 300)
- `goAnalyzer.declarationColor` - —Ü–≤–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "green")
- `goAnalyzer.useColor` - —Ü–≤–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "yellow")
- `goAnalyzer.pointerColor` - —Ü–≤–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "blue")
- `goAnalyzer.raceColor` - —Ü–≤–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ data race (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "red")

## –ü—Ä–∏–º–µ—Ä

```go
func main() {
    x := 42          // üü¢ –û–±—ä—è–≤–ª–µ–Ω–∏–µ
    println(x)       // üü° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
    ptr := &x        // üü° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ x, üü¢ –û–±—ä—è–≤–ª–µ–Ω–∏–µ ptr
    println(*ptr)    // üîµ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è
    go func() {
        println(x)   // üî¥ Data race!
    }()
}
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **–°–µ—Ä–≤–µ—Ä**: Rust —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º tree-sitter –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Go
- **–ö–ª–∏–µ–Ω—Ç**: TypeScript —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è VS Code
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: Language Server Protocol (LSP)
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
go-analyzer-rs/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ main.rs          # Rust LSP —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ vscode/
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îî‚îÄ‚îÄ extension.ts # VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ go_test/
‚îÇ   ‚îî‚îÄ‚îÄ main.go          # –¢–µ—Å—Ç–æ–≤—ã–π Go —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ Cargo.toml
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Makefile (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make rebuild

# –ò–ª–∏ –ø–æ—à–∞–≥–æ–≤–æ:
make clean
make build
make copy
make npm
make compile
```

#### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –°–æ–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `cargo build`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –±–∏–Ω–∞—Ä–Ω–∏–∫: `copy target\debug\go-analyzer-rs.exe vscode\server\` (Windows) –∏–ª–∏ `cp target/debug/go-analyzer-rs vscode/server/` (Linux/macOS)
3. –°–æ–±–µ—Ä–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ: `cd vscode && npm run compile`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ VS Code –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏ (F5)
5. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π Go —Ñ–∞–π–ª –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å 